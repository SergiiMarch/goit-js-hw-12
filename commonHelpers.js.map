{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// pixabay-api.js\nimport axios from 'axios';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst API_KEY = '44791015-436dd02a5fc0b5187e9b97af9';\nconst urlApi = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page) {\n  const url = `${urlApi}?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=15`;\n  try {\n    const response = await axios.get(url);\n    const data = response.data;\n\n    if (data.hits.length === 0) {\n      throw new Error('No images found');\n    }\n\n    return data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n\n    iziToast.error({\n      title: 'Error',\n      message: 'Sorry, there was an error fetching images. Please try again!',\n    });\n\n    throw error;\n  }\n}\n","import { divEl } from '../main';\n\nfunction clearDivEl() {\n  divEl.innerHTML = '';\n}\n\nfunction randomMarkup(images) {\n  clearDivEl();\n  let galleryMarkup = '';\n  images.forEach(image => {\n    const galleryItem = `\n      <div class=\"card\">\n        <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n          <div class=\"card-img-top\">\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n          </div>\n        </a>\n        <div class=\"card-text\">\n          <p>Likes: ${image.likes}</p>\n          <p>Views: ${image.views}</p>\n          <p>Comments: ${image.comments}</p>\n          <p>Downloads: ${image.downloads}</p>\n        </div>\n      </div>`;\n    galleryMarkup += galleryItem;\n  });\n  divEl.insertAdjacentHTML('beforeend', galleryMarkup);\n}\n\nexport { randomMarkup, clearDivEl };\n","import { fetchImages } from './js/pixabay-api';\nimport { randomMarkup, clearDivEl } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst buttonEl = document.querySelector('.button-js');\nconst divEl = document.querySelector('.js-div');\nconst inputEl = document.querySelector('.search-js');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet lightbox;\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\nbuttonEl.addEventListener('click', onClick);\n\nasync function onClick(e) {\n  e.preventDefault();\n  const query = inputEl.value.trim();\n  currentPage = 1;\n\n  if (query === '') {\n    iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search term',\n    });\n    return;\n  }\n\n  currentQuery = query;\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage);\n    totalHits = data.totalHits;\n    clearDivEl();\n    randomMarkup(data.hits);\n    if (data.hits.length < 15 || currentPage * 15 >= totalHits) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    } else {\n      loadMoreBtn.style.display = 'block';\n    }\n\n    lightbox = new SimpleLightbox('.gallery-item', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  } catch (error) {\n    console.error('Error fetching and rendering images:', error);\n  }\n}\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage += 1;\n\n  try {\n    const data = await fetchImages(currentQuery, currentPage);\n    randomMarkup(data.hits);\n    if (currentPage * 15 >= totalHits) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.info({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n      });\n    }\n\n    const { height: cardHeight } = document\n      .querySelector('.gallery')\n      .firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n\n    lightbox.refresh();\n  } catch (error) {\n    console.error('Error fetching and rendering images:', error);\n  }\n});\n\nexport { divEl };\n"],"names":["API_KEY","urlApi","fetchImages","query","page","url","data","axios","error","iziToast","clearDivEl","divEl","randomMarkup","images","galleryMarkup","image","galleryItem","buttonEl","inputEl","loadMoreBtn","lightbox","currentPage","currentQuery","totalHits","onClick","e","SimpleLightbox","cardHeight"],"mappings":"+vBAKA,MAAMA,EAAU,qCACVC,EAAS,2BAER,eAAeC,EAAYC,EAAOC,EAAM,CAC7C,MAAMC,EAAM,GAAGJ,CAAM,QAAQD,CAAO,MAAMG,CAAK,iEAAiEC,CAAI,eACpH,GAAI,CAEF,MAAME,GADW,MAAMC,EAAM,IAAIF,CAAG,GACd,KAEtB,GAAIC,EAAK,KAAK,SAAW,EACvB,MAAM,IAAI,MAAM,iBAAiB,EAGnC,OAAOA,CACR,OAAQE,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EAE7CC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,8DACf,CAAK,EAEKD,CACP,CACH,CC3BA,SAASE,GAAa,CACpBC,EAAM,UAAY,EACpB,CAEA,SAASC,EAAaC,EAAQ,CAC5BH,IACA,IAAII,EAAgB,GACpBD,EAAO,QAAQE,GAAS,CACtB,MAAMC,EAAc;AAAA;AAAA,mBAELD,EAAM,aAAa;AAAA;AAAA,wBAEdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,sBAIxCA,EAAM,KAAK;AAAA,sBACXA,EAAM,KAAK;AAAA,yBACRA,EAAM,QAAQ;AAAA,0BACbA,EAAM,SAAS;AAAA;AAAA,cAGrCD,GAAiBE,CACrB,CAAG,EACDL,EAAM,mBAAmB,YAAaG,CAAa,CACrD,CCpBA,MAAMG,EAAW,SAAS,cAAc,YAAY,EAC9CN,EAAQ,SAAS,cAAc,SAAS,EACxCO,EAAU,SAAS,cAAc,YAAY,EAC7CC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIC,EACAC,EAAc,EACdC,EAAe,GACfC,EAAY,EAEhBN,EAAS,iBAAiB,QAASO,CAAO,EAE1C,eAAeA,EAAQC,EAAG,CACxBA,EAAE,eAAc,EAChB,MAAMtB,EAAQe,EAAQ,MAAM,KAAI,EAGhC,GAFAG,EAAc,EAEVlB,IAAU,GAAI,CAChBM,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,4BACf,CAAK,EACD,MACD,CAEDa,EAAenB,EAEf,GAAI,CACF,MAAMG,EAAO,MAAMJ,EAAYoB,EAAcD,CAAW,EACxDE,EAAYjB,EAAK,UACjBI,IACAE,EAAaN,EAAK,IAAI,EAClBA,EAAK,KAAK,OAAS,IAAMe,EAAc,IAAME,GAC/CJ,EAAY,MAAM,QAAU,OAC5BV,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,4DACjB,CAAO,GAEDU,EAAY,MAAM,QAAU,QAG9BC,EAAW,IAAIM,EAAe,gBAAiB,CAC7C,aAAc,MACd,aAAc,GACpB,CAAK,CACF,OAAQlB,EAAO,CACd,QAAQ,MAAM,uCAAwCA,CAAK,CAC5D,CACH,CAEAW,EAAY,iBAAiB,QAAS,SAAY,CAChDE,GAAe,EAEf,GAAI,CACF,MAAMf,EAAO,MAAMJ,EAAYoB,EAAcD,CAAW,EACxDT,EAAaN,EAAK,IAAI,EAClBe,EAAc,IAAME,IACtBJ,EAAY,MAAM,QAAU,OAC5BV,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,4DACjB,CAAO,GAGH,KAAM,CAAE,OAAQkB,CAAU,EAAK,SAC5B,cAAc,UAAU,EACxB,kBAAkB,sBAAqB,EAC1C,OAAO,SAAS,CACd,IAAKA,EAAa,EAClB,SAAU,QAChB,CAAK,EAEDP,EAAS,QAAO,CACjB,OAAQZ,EAAO,CACd,QAAQ,MAAM,uCAAwCA,CAAK,CAC5D,CACH,CAAC"}